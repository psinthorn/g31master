<cs-data-form *ngIf="form" i3eParentProcessor [formGroup]="form">
  <!--
  <div>
    <cs-vendor-control formControlName="myTest"></cs-vendor-control>
  </div>
  -->
  <div fxLayout="row" fxLayout.xs="column">
    <mat-form-field fxFlex="160px" fxFlex.xs>
      <input matInput formControlName="code" placeholder="Code" formControlHtmlError />
    </mat-form-field>
    <mat-form-field fxFlex>
      <input matInput formControlName="firstname" placeholder="First Name" required />
    </mat-form-field>
    <mat-form-field fxFlex>
      <input matInput formControlName="lastname" placeholder="Last Name" required />
    </mat-form-field>
  </div>
  <div fxLayout="row" fxLayout.xs="column">
    <mat-form-field fxFlex>
      <textarea matInput formControlName="address" placeholder="Address" rows="5"></textarea>
    </mat-form-field>
    <mat-form-field fxFlex>
      <textarea matInput formControlName="address2" placeholder="Address 2" rows="5"></textarea>
    </mat-form-field>
  </div>
  <div fxLayout="row" fxLayout.xs="column">
    <mat-form-field fxFlex>
      <input matInput formControlName="city" placeholder="City" required />
    </mat-form-field>
    <mat-form-field fxFlex>
      <input matInput formControlName="state" placeholder="State" required />
      <mat-error>
        <cs-form-control-error></cs-form-control-error>
      </mat-error>
    </mat-form-field>
    <mat-form-field fxFlex>
      <input matInput formControlName="postalcode" placeholder="Postal Code" required maxlength="5" />
      <mat-error>
        <cs-form-control-error></cs-form-control-error>
      </mat-error>
      <mat-hint align="end">{{ (form.value.postalcode)? form.value.postalcode.length : 0 }} / 5(???)</mat-hint>
    </mat-form-field>
  </div>
  <div fxLayout="column">
    <h3>Details</h3>
    <item-data-array formArrayName="details" [createItemCallback]="createDetail" required activeMedia #activeMedia="activeMedia">
      <item-data-array-item *ngFor="let item of form.get('details').controls; let i=index" [index]="i"
        [layout]="activeMedia.if('xs', 'column', 'row')">
        <div fxLayout="row" fxLayout.xs="column" [formGroupName]="i">
          <mat-form-field fxFlex>
            <input matInput formControlName="att1" placeholder="Attribute1" required />
          </mat-form-field>
          <mat-form-field fxFlex>
            <input matInput formControlName="att2" placeholder="Attribute2" required />
          </mat-form-field>
        </div>
      </item-data-array-item>
    </item-data-array>
  </div>
  <div fxLayout="column">
    <cs-address formGroupName="addressEx"></cs-address>
  </div>

  <cs-home-control formControlName="parent" freeEnter></cs-home-control>

  <pre>{{ form.get('parent').value }}</pre>
</cs-data-form>
